# ğŸ® è§†è§‰å°è¯´æ¡†æ¶ä½¿ç”¨æŒ‡å—

## ğŸ“‹ ç›®å½•
1. [é¡¹ç›®ç»“æ„æ¦‚è¿°](#é¡¹ç›®ç»“æ„æ¦‚è¿°)
2. [ç¾æœ¯èµ„æºå‡†å¤‡](#ç¾æœ¯èµ„æºå‡†å¤‡)
3. [è§’è‰²ç³»ç»Ÿé…ç½®](#è§’è‰²ç³»ç»Ÿé…ç½®)
4. [åœºæ™¯æ•°æ®åˆ›å»º](#åœºæ™¯æ•°æ®åˆ›å»º)
5. [UIç•Œé¢é…ç½®](#UIç•Œé¢é…ç½®)
6. [éŸ³é¢‘ç³»ç»Ÿé…ç½®](#éŸ³é¢‘ç³»ç»Ÿé…ç½®)
7. [æ¸¸æˆæµ‹è¯•ä¸è¿è¡Œ](#æ¸¸æˆæµ‹è¯•ä¸è¿è¡Œ)
8. [å¸¸è§é—®é¢˜è§£ç­”](#å¸¸è§é—®é¢˜è§£ç­”)

## ğŸ—ï¸ é¡¹ç›®ç»“æ„æ¦‚è¿°

### æ ¸å¿ƒè„šæœ¬æ–‡ä»¶
- **GameManager.cs** - æ¸¸æˆçŠ¶æ€ç®¡ç†å’Œå­˜æ¡£ç³»ç»Ÿ
- **CharacterManager.cs** - è§’è‰²æ•°æ®ç®¡ç†å’Œè¡¨æƒ…ç³»ç»Ÿ
- **DialogueSystem.cs** - å¯¹è¯æµç¨‹æ§åˆ¶å’Œé€‰æ‹©åˆ†æ”¯
- **SceneDataManager.cs** - åœºæ™¯æ•°æ®åŠ è½½å’Œç®¡ç†
- **UIManager.cs** - ç•Œé¢åˆ‡æ¢å’Œè®¾ç½®ç®¡ç†
- **AudioManager.cs** - éŸ³é¢‘æ’­æ”¾å’ŒéŸ³é‡æ§åˆ¶

### èµ„æºæ–‡ä»¶å¤¹ç»“æ„
```
Assets/
â”œâ”€â”€ Resources/
â”‚   â”œâ”€â”€ Characters/      # è§’è‰²ç«‹ç»˜å’Œè¡¨æƒ…
â”‚   â”œâ”€â”€ Backgrounds/     # åœºæ™¯èƒŒæ™¯å›¾ç‰‡
â”‚   â”œâ”€â”€ Audio/          # éŸ³é¢‘æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ BGM/        # èƒŒæ™¯éŸ³ä¹
â”‚   â”‚   â”œâ”€â”€ Voices/     # è§’è‰²è¯­éŸ³
â”‚   â”‚   â””â”€â”€ SFX/        # éŸ³æ•ˆ
â”‚   â””â”€â”€ UI/             # UIç²¾çµå’Œå›¾æ ‡
â”œâ”€â”€ Scripts/            # æ‰€æœ‰C#è„šæœ¬
â””â”€â”€ Scenes/             # Unityåœºæ™¯æ–‡ä»¶
```

## ğŸ¨ ç¾æœ¯èµ„æºå‡†å¤‡

### 1. è§’è‰²ç«‹ç»˜è§„èŒƒ
- **å°ºå¯¸**: å»ºè®®1024x1024æˆ–2048x2048åƒç´ 
- **æ ¼å¼**: PNGï¼ˆæ”¯æŒé€æ˜é€šé“ï¼‰
- **å‘½å**: `è§’è‰²å_è¡¨æƒ….png`
  - ç¤ºä¾‹: `Alice_Normal.png`, `Alice_Happy.png`

### 2. è¡¨æƒ…ç±»å‹
```csharp
public enum Expression
{
    Normal,    // æ™®é€š
    Happy,     // å¼€å¿ƒ
    Sad,       // æ‚²ä¼¤
    Angry,     // ç”Ÿæ°”
    Surprised, // æƒŠè®¶
    // å¯è‡ªå®šä¹‰æ·»åŠ æ›´å¤šè¡¨æƒ…
}
```

### 3. èƒŒæ™¯å›¾ç‰‡
- **å°ºå¯¸**: 1920x1080ï¼ˆ16:9æ ‡å‡†åˆ†è¾¨ç‡ï¼‰
- **æ ¼å¼**: PNGæˆ–JPG
- **å‘½å**: æè¿°æ€§åç§°ï¼Œå¦‚ `school_classroom.png`

## ğŸ‘¥ è§’è‰²ç³»ç»Ÿé…ç½®

### 1. é…ç½®è§’è‰²æ•°æ®
åœ¨Unityç¼–è¾‘å™¨ä¸­é…ç½®CharacterManagerï¼š

1. åœ¨Hierarchyä¸­åˆ›å»ºç©ºGameObjectï¼Œæ·»åŠ CharacterManagerç»„ä»¶
2. åœ¨Inspectoré¢æ¿ä¸­ç‚¹å‡»"+"æ·»åŠ æ–°è§’è‰²
3. é…ç½®æ¯ä¸ªè§’è‰²çš„å±æ€§ï¼š

| å±æ€§ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|------|------|--------|
| characterName | è§’è‰²è‹±æ–‡åï¼ˆä»£ç ä¸­ä½¿ç”¨ï¼‰ | Alice |
| fullName | è§’è‰²å…¨åï¼ˆæ˜¾ç¤ºç”¨ï¼‰ | çˆ±ä¸½ä¸ |
| age | å¹´é¾„ | 18 |
| personality | æ€§æ ¼æè¿° | æ´»æ³¼å¼€æœ—çš„å°‘å¥³ |
| background | èƒŒæ™¯æ•…äº‹ | æ¥è‡ªé­”æ³•å­¦é™¢çš„ä¼˜ç­‰ç”Ÿ |
| nameColor | åå­—æ˜¾ç¤ºé¢œè‰² | #FF6B6B |
| expressions | è¡¨æƒ…ç²¾çµæ•°ç»„ | æ‹–æ‹½6ä¸ªè¡¨æƒ…å›¾ç‰‡ |

### 2. ä»£ç ä¸­å¼•ç”¨è§’è‰²
```csharp
// è·å–è§’è‰²æ•°æ®
Character alice = CharacterManager.Instance.GetCharacter("Alice");

// ä¿®æ”¹è§’è‰²å¥½æ„Ÿåº¦
CharacterManager.Instance.ModifyAffection("Alice", 10);

// è·å–å½“å‰å¥½æ„Ÿåº¦
int affection = CharacterManager.Instance.GetAffection("Alice");
```

## ğŸ­ åœºæ™¯æ•°æ®åˆ›å»º

### 1. åˆ›å»ºåœºæ™¯æ•°æ®

**æ–¹æ³•ä¸€ï¼šé€šè¿‡SceneDataManagerä»£ç åˆ›å»º**
```csharp
SceneData scene = new SceneData
{
    sceneId = "chapter1_scene1",
    dialogueLines = new List<DialogueLine>
    {
        new DialogueLine
        {
            characterName = "Alice",
            dialogueText = "ä½ å¥½ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„ä¸–ç•Œï¼",
            expression = Expression.Happy,
            voiceClip = Resources.Load<AudioClip>("Audio/Voices/Alice/hello")
        },
        new DialogueLine
        {
            characterName = "Player", // ç©å®¶å¯¹è¯
            dialogueText = "è¿™é‡ŒçœŸæ¼‚äº®ï¼",
            expression = Expression.Normal
        }
    },
    choices = new List<Choice>
    {
        new Choice
        {
            choiceText = "ç§°èµç¯å¢ƒ",
            nextScene = "chapter1_scene2",
            effects = new Dictionary<string, int> { { "affection_Alice", 5 } }
        },
        new Choice
        {
            choiceText = "è¯¢é—®æ¥å†", 
            nextScene = "chapter1_scene3",
            effects = new Dictionary<string, int> { { "flag_asked_origin", 1 } }
        }
    },
    backgroundImage = Resources.Load<Sprite>("Backgrounds/magic_forest"),
    backgroundMusic = Resources.Load<AudioClip>("Audio/BGM/peaceful")
};

SceneDataManager.Instance.AddScene(scene);
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨ScriptableObjectï¼ˆæ¨èï¼‰**
1. åˆ›å»ºç»§æ‰¿è‡ªScriptableObjectçš„åœºæ™¯æ•°æ®ç±»
2. åœ¨Editoræ–‡ä»¶å¤¹ä¸­åˆ›å»ºè‡ªå®šä¹‰ç¼–è¾‘å™¨
3. é€šè¿‡Assetèœå•åˆ›å»ºåœºæ™¯æ•°æ®èµ„äº§

### 2. åœºæ™¯è¿æ¥ä¸åˆ†æ”¯

```csharp
// çº¿æ€§åœºæ™¯æµç¨‹
scene1 â†’ scene2 â†’ scene3

// åˆ†æ”¯é€‰æ‹©æµç¨‹
          scene1
         /      \
    choiceA    choiceB
     /            \
scene2           scene3
    \            /
     scene4 (æ±‡åˆ)

// æ¡ä»¶è·³è½¬
if (GameManager.Instance.GetFlag("met_Alice"))
    nextScene = "scene_with_Alice";
else
    nextScene = "scene_alone";
```

## ğŸ–¥ï¸ UIç•Œé¢é…ç½®

### 1. ä¸»ç•Œé¢é…ç½®

åœ¨UIManagerä¸­æ‹–æ‹½å¯¹åº”çš„UIç»„ä»¶ï¼š

| UIç»„ä»¶ | å¯¹åº”å­—æ®µ | è¯´æ˜ |
|--------|----------|------|
| å¼€å§‹æŒ‰é’® | startButton | å¼€å§‹æ–°æ¸¸æˆ |
| ç»§ç»­æŒ‰é’® | continueButton | ç»§ç»­æ¸¸æˆ |
| è®¾ç½®æŒ‰é’® | settingsButton | æ‰“å¼€è®¾ç½® |
| é€€å‡ºæŒ‰é’® | quitButton | é€€å‡ºæ¸¸æˆ |

### 2. å¯¹è¯ç•Œé¢é…ç½®

| UIç»„ä»¶ | å¯¹åº”å­—æ®µ | è¯´æ˜ |
|--------|----------|------|
| å¯¹è¯æ¡† | dialoguePanel | å¯¹è¯å®¹å™¨ |
| è§’è‰²åæ–‡æœ¬ | nameText | æ˜¾ç¤ºè§’è‰²å |
| å¯¹è¯æ–‡æœ¬ | dialogueText | æ˜¾ç¤ºå¯¹è¯å†…å®¹ |
| è§’è‰²å¤´åƒ | characterImage | æ˜¾ç¤ºè§’è‰²å¤´åƒ |
| é€‰æ‹©æŒ‰é’®å®¹å™¨ | choicesPanel | é€‰æ‹©é¡¹çˆ¶å¯¹è±¡ |
| é€‰æ‹©æŒ‰é’®é¢„åˆ¶ä½“ | choiceButtonPrefab | é€‰æ‹©æŒ‰é’®æ¨¡æ¿ |

### 3. è®¾ç½®ç•Œé¢é…ç½®

```csharp
// éŸ³é‡æ§åˆ¶
UIManager.Instance.SetBGMVolume(0.8f);
UIManager.Instance.SetSFXVolume(0.7f);

// ç”»é¢è®¾ç½®
UIManager.Instance.SetResolution(1920, 1080);
UIManager.Instance.SetFullscreen(true);
```

## ğŸ”Š éŸ³é¢‘ç³»ç»Ÿé…ç½®

### 1. éŸ³é¢‘æ–‡ä»¶ç»„ç»‡

```
Assets/Resources/Audio/
â”œâ”€â”€ BGM/
â”‚   â”œâ”€â”€ main_theme.mp3
â”‚   â”œâ”€â”€ peaceful.mp3
â”‚   â””â”€â”€ battle.mp3
â”œâ”€â”€ Voices/
â”‚   â”œâ”€â”€ Alice/
â”‚   â”‚   â”œâ”€â”€ hello.wav
â”‚   â”‚   â”œâ”€â”€ yes.wav
â”‚   â”‚   â””â”€â”€ no.wav
â”‚   â””â”€â”€ Bob/
â”‚       â”œâ”€â”€ greeting.wav
â”‚       â””â”€â”€ question.wav
â””â”€â”€ SFX/
    â”œâ”€â”€ ui_click.wav
    â”œâ”€â”€ ui_hover.wav
    â””â”€â”€ notification.wav
```

### 2. éŸ³é¢‘ç®¡ç†å™¨é…ç½®

åœ¨AudioManagerçš„Inspectorä¸­æ‹–æ‹½éŸ³é¢‘æ–‡ä»¶ï¼š

- **bgmTracks**: èƒŒæ™¯éŸ³ä¹åˆ—è¡¨
- **ambientSounds**: ç¯å¢ƒéŸ³åˆ—è¡¨
- **uiSfx**: UIéŸ³æ•ˆåˆ—è¡¨

### 3. ä»£ç ä¸­æ’­æ”¾éŸ³é¢‘

```csharp
// æ’­æ”¾èƒŒæ™¯éŸ³ä¹
AudioManager.Instance.PlayBGM("main_theme");

// æ’­æ”¾è§’è‰²è¯­éŸ³
AudioManager.Instance.PlayVoice("Alice", "hello");

// æ’­æ”¾UIéŸ³æ•ˆ
AudioManager.Instance.PlayUISFX("click");

// è®¾ç½®éŸ³é‡
AudioManager.Instance.SetBGMVolume(0.8f);
AudioManager.Instance.SetVoiceVolume(1.0f);
AudioManager.Instance.SetSFXVolume(0.7f);
```

## ğŸ¯ æ¸¸æˆæµ‹è¯•ä¸è¿è¡Œ

### 1. å¯åŠ¨æ¸¸æˆæµç¨‹

```csharp
// æ–¹æ³•ä¸€ï¼šé€šè¿‡UIManager
UIManager.Instance.ShowMainMenu();

// æ–¹æ³•äºŒï¼šç›´æ¥å¼€å§‹æ¸¸æˆ
UIManager.Instance.StartNewGame();

// æ–¹æ³•ä¸‰ï¼šåŠ è½½å­˜æ¡£
UIManager.Instance.LoadGame(1); // åŠ è½½å­˜æ¡£æ§½1
```

### 2. æµ‹è¯•ç‰¹å®šåœºæ™¯

```csharp
// åœ¨QuickStartGuideç»„ä»¶ä¸Šæµ‹è¯•
public class TestScene : MonoBehaviour
{
    void Start()
    {
        // ç­‰å¾…1ç§’åå¼€å§‹æµ‹è¯•åœºæ™¯
        Invoke("StartTestScene", 1f);
    }
    
    void StartTestScene()
    {
        DialogueSystem.Instance.StartScene("test_scene");
    }
    
    // ç¼–è¾‘å™¨å¿«æ·æµ‹è¯•
    [ContextMenu("æµ‹è¯•å½“å‰åœºæ™¯")]
    void TestCurrentScene()
    {
        StartTestScene();
    }
}
```

### 3. è°ƒè¯•æŠ€å·§

```csharp
// æŸ¥çœ‹å½“å‰æ¸¸æˆçŠ¶æ€
Debug.Log("å½“å‰ç« èŠ‚: " + GameManager.Instance.currentChapter);
Debug.Log("å½“å‰åœºæ™¯: " + GameManager.Instance.currentScene);
Debug.Log("çˆ±ä¸½ä¸å¥½æ„Ÿåº¦: " + CharacterManager.Instance.GetAffection("Alice"));

// æ£€æŸ¥æ ‡å¿—ä½
if (GameManager.Instance.GetFlag("met_Alice"))
    Debug.Log("å·²ç»è§è¿‡çˆ±ä¸½ä¸");

// åˆ—å‡ºæ‰€æœ‰åœºæ™¯
foreach (var scene in SceneDataManager.Instance.GetAllScenes())
    Debug.Log("åœºæ™¯: " + scene.sceneId);
```

## â“ å¸¸è§é—®é¢˜è§£ç­”

### Q1: è§’è‰²ç«‹ç»˜ä¸æ˜¾ç¤ºæ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š
- å›¾ç‰‡æ˜¯å¦æ”¾åœ¨Resources/Charactersæ–‡ä»¶å¤¹
- å›¾ç‰‡æ ¼å¼æ˜¯å¦ä¸ºPNGï¼ˆæ”¯æŒé€æ˜é€šé“ï¼‰
- åœ¨CharacterManagerä¸­æ˜¯å¦æ­£ç¡®é…ç½®äº†è¡¨æƒ…æ•°ç»„

### Q2: éŸ³é¢‘æ–‡ä»¶æ— æ³•æ’­æ”¾ï¼Ÿ
A: æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š
- éŸ³é¢‘æ–‡ä»¶æ˜¯å¦æ”¾åœ¨Resources/Audioå¯¹åº”å­æ–‡ä»¶å¤¹
- æ–‡ä»¶æ ¼å¼æ˜¯å¦æ”¯æŒï¼ˆMP3ã€WAVã€OGGï¼‰
- åœ¨AudioManagerä¸­æ˜¯å¦æ­£ç¡®é…ç½®äº†éŸ³é¢‘å‰ªè¾‘

### Q3: é€‰æ‹©åˆ†æ”¯ä¸ç”Ÿæ•ˆï¼Ÿ
A: æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š
- é€‰æ‹©é¡¹çš„nextSceneæ˜¯å¦æ­£ç¡®è®¾ç½®
- ç›®æ ‡åœºæ™¯æ˜¯å¦å­˜åœ¨äºSceneDataManagerä¸­
- æ˜¯å¦æœ‰æ¡ä»¶åˆ¤æ–­é˜»æ­¢äº†åœºæ™¯è·³è½¬

### Q4: å­˜æ¡£åŠŸèƒ½å¼‚å¸¸ï¼Ÿ
A: æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š
- æ˜¯å¦è°ƒç”¨äº†GameManager.Instance.SaveGame()
- å­˜æ¡£æ§½ä½æ˜¯å¦æ­£ç¡®ï¼ˆ1-3ï¼‰
- ç©å®¶è®¾ç½®æ˜¯å¦å…è®¸æœ¬åœ°å­˜å‚¨

### Q5: å¦‚ä½•æ·»åŠ æ–°è§’è‰²ï¼Ÿ
A: åœ¨CharacterManagerçš„Inspectorä¸­ï¼š
1. ç‚¹å‡»charactersåˆ—è¡¨çš„"+"æŒ‰é’®
2. å¡«å†™è§’è‰²åŸºæœ¬ä¿¡æ¯
3. æ‹–æ‹½è¡¨æƒ…ç²¾çµåˆ°expressionsæ•°ç»„
4. åœ¨åœºæ™¯æ•°æ®ä¸­ä½¿ç”¨characterNameå¼•ç”¨

## ğŸš€ è¿›é˜¶åŠŸèƒ½

### 1. è‡ªå®šä¹‰è¡¨è¾¾å¼ç³»ç»Ÿ
```csharp
// æ‰©å±•è¡¨æƒ…æšä¸¾
public enum CustomExpression
{
    Normal,
    Happy,
    Sad,
    Angry,
    Surprised,
    Blush,    // è„¸çº¢
    Confused, // å›°æƒ‘
    Sleepy    // å›°å€¦
}

// è‡ªå®šä¹‰è¡¨æƒ…æ˜ å°„
public Dictionary<CustomExpression, Sprite> customExpressions;
```

### 2. åŠ¨æ€åœºæ™¯ç”Ÿæˆ
```csharp
// æ ¹æ®æ¡ä»¶åŠ¨æ€åˆ›å»ºåœºæ™¯
SceneData CreateDynamicScene()
{
    SceneData scene = new SceneData();
    
    if (GameManager.Instance.GetFlag("is_night"))
    {
        scene.backgroundImage = Resources.Load<Sprite>("Backgrounds/night");
        scene.backgroundMusic = Resources.Load<AudioClip>("Audio/BGM/night_theme");
    }
    else
    {
        scene.backgroundImage = Resources.Load<Sprite>("Backgrounds/day");
        scene.backgroundMusic = Resources.Load<AudioClip>("Audio/BGM/day_theme");
    }
    
    return scene;
}
```

### 3. å¤šè¯­è¨€æ”¯æŒ
```csharp
// å¤šè¯­è¨€å¯¹è¯ç³»ç»Ÿ
[System.Serializable]
public class LocalizedDialogue
{
    public string sceneId;
    public List<LocalizedLine> lines;
}

[System.Serializable]
public class LocalizedLine
{
    public string characterName;
    public Dictionary<string, string> translations; // key: language, value: text
}
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æŸ¥çœ‹Consoleçª—å£çš„é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥æ‰€æœ‰Inspectoré…ç½®æ˜¯å¦æ­£ç¡®
3. é˜…è¯»å¯¹åº”è„šæœ¬çš„æ³¨é‡Šè¯´æ˜
4. åœ¨è„šæœ¬ä¸­æ·»åŠ Debug.Logè¿›è¡Œè°ƒè¯•

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰